<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>jQuery Slot Machine</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=2.0">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="./styles/style.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="./dist/jquery.slotmachine.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"
    type="text/css" />

  <script src="dist/money.js"></script>
  <script src="./dist/register.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script src="./dist/slotmachine.js"></script>
  <script src="./dist/bet.js"></script>
  <script src="./dist/jquery.slotmachine.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js"
    integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="header-line"></div>



  <!-- Intro -->
  <header>
    <h1>CASINO SLOTMACHINE</h1>
  </header>

  <div id="randomize">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <div>
            <div id="machine1" class="randomizeMachine">
              <div><img src="img/slot1.png" /></div>
              <div><img src="img/slot2.png" /></div>
              <div><img src="img/slot3.png" /></div>
              <div><img src="img/slot4.png" /></div>
              <div><img src="img/slot5.png" /></div>
              <div><img src="img/slot6.png" /></div>
            </div>
          </div>
          <div id="machine1Result" class="col-xs-4 machineResult">Index: 0</div>
        </div>

        <div class="col-sm-4">
          <div>
            <div id="machine2" class="randomizeMachine">
              <div><img src="img/slot1.png" /></div>
              <div><img src="img/slot2.png" /></div>
              <div><img src="img/slot3.png" /></div>
              <div><img src="img/slot4.png" /></div>
              <div><img src="img/slot5.png" /></div>
              <div><img src="img/slot6.png" /></div>
            </div>
          </div>
          <div id="machine2Result" class="col-xs-4 machineResult">Index: 1</div>
        </div>

        <div class="col-sm-4">
          <div>
            <div id="machine3" class="randomizeMachine">
              <div><img src="img/slot1.png" /></div>
              <div><img src="img/slot2.png" /></div>
              <div><img src="img/slot3.png" /></div>
              <div><img src="img/slot4.png" /></div>
              <div><img src="img/slot5.png" /></div>
              <div><img src="img/slot6.png" /></div>
            </div>
          </div>
          <div id="machine3Result" class="col-xs-4 machineResult">Index: 2</div>
        </div>

        <div class="btn-group btn-group-justified" role="group">
          <h5>Current balance: </h5>
          <div id="balance"></div>
          <h5>Place your bet!</h5>
          <div id="bet"></div>
          <button id="randomizeButton" type="button" class="btn btn-danger btn-lg">Shuffle</button>
          <!--Modal-->
          <div id="myModal" class="modal col-sm-4" style="margin-top: 15%; margin-left:33.5%;">
              <div class="modal-content" style="text-align: center;" >
                  <div class="modal-header"style="background-color: gold; text-align: center; display: block;">
                      <span class="close">&times;</span>
                      <div id="win_text"></div>
                  </div>
                  <div class="modal-body">
                      <div id="Price_money"></div>
                  </div>
              </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-10 offset-sm-1">
          <pre><code id="codeBlock2"></code></pre>
        </div>
      </div>
    </div>
  </div>
  <script id="codeScript2">
    const btn = document.querySelector('#randomizeButton');
    const results = {
      machine1: document.querySelector('#machine1Result'),
      machine2: document.querySelector('#machine2Result'),
      machine3: document.querySelector('#machine3Result')
    };
    var ind = 0;
    const start_money = 1000;
    this.balance = start_money;
    const el1 = document.querySelector('#machine1');
    const el2 = document.querySelector('#machine2');
    const el3 = document.querySelector('#machine3');
    const machine1 = new SlotMachine(el1, { active: 0 }, 1, ind);
    const machine2 = new SlotMachine(el2, { active: 1 }, 2, ind);
    const machine3 = new SlotMachine(el3, { active: 2 }, 3, ind);
    const register = new Register();
    const result = new Money();
    this.container = document.getElementById("bet");
    this.container_balance = document.getElementById("balance")
    this.bal_html = document.createElement("h5")
    this.bal_html.innerText = this.balance;
    this.container_balance.appendChild(this.bal_html);
    const bet = new Bet(this.container);

    function onComplete(active) {
      results[this.element.id].innerText = `Index: ${this.active}`;
    }

    // Get the modal
    var modal = document.getElementById('myModal');

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    //Get the h2 tag with the header when you shuffle
    var price_header = document.getElementById('win_text');

    //Get the p tag with the content of what you win
    var price_text = document.getElementById('Price_money')

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

    btn.addEventListener('click', () => {
      ind = ind + 1;
      machine1.shuffle(5, onComplete);
      setTimeout(() => machine2.shuffle(5, onComplete), 500);
      setTimeout(() => machine3.shuffle(5, onComplete), 1000);
      //setTimeout(myfonction, 5000); 
      this.result_list = result.Win(bet.bet(this.balance), ind, price_header, price_text);
      this.balance += this.result_list[0];
      this.bal_html.innerText = this.balance;
      register.StoreData(ind, this.result_list[1], this.balance)
      modal.style.display = "block";
    });
  </script>

  <footer>
    <div class="content">
      <div id="textMachine" style="text-align: center">
        <div>PUSH!</div>
        <div>WIN!</div>
        <div>$$$$!</div>
      </div>
      <script>
        $("#textMachine").slotMachine({
          active: 1,
          delay: 450,
          auto: 1500,
          randomize() {
            return this.nextIndex;
          }
        });
      </script>
    </div>
  </footer>


</body>

</html>